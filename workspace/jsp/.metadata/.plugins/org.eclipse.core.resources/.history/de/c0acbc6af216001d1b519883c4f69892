<%@page import="java.io.FileWriter"%>
<%@page import="java.util.Scanner"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%
	request.setCharacterEncoding("UTF-8");
	
	String id = request.getParameter("arg1");
	String pw = request.getParameter("pw");
	String name = request.getParameter("name");
	String phone = request.getParameter("tel");
	String address = request.getParameter("addr");
	String email = request.getParameter("email");
	
	
	if(id == null || id.trim().equals("")) {
		out.println("<script>");
		out.println("alert('정상적인 접속이 아닙니다.');");
		out.println("location.href = 'list.jsp';");
		out.println("</script>");
		return;
	}
	
	String attachPath = "C:/Users/HKIT/COY/attach";
	String uploadPath = attachPath + "/testFile/jspTest";
	String uploadFile = uploadPath + "/member.txt";
			
	try {
		java.io.File f = new java.io.File(uploadFile);
		Scanner sReader = new Scanner(f);
					
		while(sReader.hasNextLine()) {
			String data = sReader.nextLine();
			String[] imsiArray = data.split(",");
			
			if(arg1.equals(imsiArray[0])) {
				name = imsiArray[2];
	            phone = imsiArray[3];
	            addr = imsiArray[4];
	            email = imsiArray[5];
	
			}
		}
		sReader.close();
	} catch(Exception e) {
		e.printStackTrace();
	}
	if (result > 0) {
		//response.sendRedirect("list.jsp");
		out.println("<script>");
		//out.println("alert('정상적으로 수정되었습니다.');");
		out.println("location.href = 'view.jsp?arg1=" + arg1 + "';");
		out.println("</script>");
	} else {
		//response.sendRedirect("chuga.jsp");
		out.println("<script>");
		out.println("alert('수정 처리 중 오류가 발생했습니다.');");
		out.println("location.href = 'sujung.jsp?arg1=" + arg1 + "';");
		out.println("</script>");
	}
		//response.sendRedirect("view.jsp");
%>

<a href="#" onclick="movePage();">[목록 페이지로]</a>